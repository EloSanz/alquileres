{
  "meta": {
    "project": "Sistema de Gestión de Alquileres",
    "date": "2025-12-22",
    "prepared_by": "Software Development Manager"
  },
  "product_overview": "Aplicación full stack para la gestión integral de propiedades en alquiler, diseñada para administradores que requieren un sistema eficiente y seguro para manejar inquilinos, pagos, propiedades y contratos con una arquitectura moderna y type-safety end-to-end.",
  "core_goals": [
    "Facilitar la administración completa de inquilinos, incluyendo historial y estados de pago.",
    "Gestionar propiedades con detalle y control de contratos asociados.",
    "Controlar pagos, cobros, deudas y generación de recibos con alertas oportunas.",
    "Proveer un dashboard administrativo con reportes y gestión de usuarios.",
    "Garantizar seguridad mediante autenticación JWT y rutas protegidas.",
    "Mantener una arquitectura tipo safety, sólida y escalable con Elysia.js, Prisma, React y Eden Treaty."
  ],
  "key_features": [
    "Sistema de autenticación basado en JWT con login, logout y protección de rutas.",
    "Gestión completa de inquilinos: CRUD, información personal, contacto e historial.",
    "Administración detallada de propiedades con información, contratos y disponibilidad.",
    "Sistema de pagos con registro, seguimiento de deudas, generación de recibos y alertas.",
    "Manejo de contratos de alquiler incluyendo borradores y contratos activos.",
    "Dashboard administrativo con visión general del negocio y reportes financieros.",
    "Interface de usuario consistente y reutilizable basada en Material UI.",
    "Comunicación API tipo safe con Eden Treaty para seguridad y consistencia.",
    "Persistencia y migraciones de base de datos con Prisma y PostgreSQL.",
    "Manejo centralizado de errores y logs para robustez del sistema."
  ],
  "user_flow_summary": [
    "Inicio de sesión y autenticación segura mediante JWT con acceso limitado según roles.",
    "Administración de inquilinos: creación, actualización, consulta y eliminación con validaciones.",
    "Gestión de propiedades: visualización, edición y actualización de estado y contratos.",
    "Gestión de pagos: registro de pagos, consultas, actualizaciones y alertas sobre deudas y vencimientos.",
    "Creación y seguimiento de contratos de alquiler con estado diferenciado.",
    "Acceso a dashboard que presenta reportes y estadísticas para la toma decisiones.",
    "Navegación con componentes UI reutilizables y experiencia coherente para el usuario.",
    "Comunicación segura y validada entre frontend y backend con inferencia de tipos end-to-end."
  ],
  "validation_criteria": [
    "Autenticación funcionando correctamente con tokens JWT y protección de rutas efectivas.",
    "CRUD completo y sin errores para la gestión de inquilinos y propiedades.",
    "Registro y seguimiento preciso de pagos y deudas, con generación correcta de recibos.",
    "Capacidad de crear, guardar y consultar contratos de alquiler, incluyendo estados diferenciados.",
    "Dashboard muestra datos actuales y reportes financieros correctos y actualizados.",
    "API segura y con comunicación tipo-safe entre frontend y backend mediante Eden Treaty.",
    "Pruebas de migraciones y persistencia de datos sin pérdida ni corrupción.",
    "Interfaz consistente y sin errores visuales siguiendo estándares Material UI.",
    "Manejo correcto y centralizado de errores, con logs útiles para diagnóstico.",
    "Cumplimiento del checklist de configuración, dependencias y comandos de desarrollo."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React",
      "Vite",
      "Material UI",
      "Elysia.js",
      "Prisma",
      "PostgreSQL",
      "JWT",
      "Eden Treaty"
    ],
    "features": [
      {
        "name": "Authentication System",
        "description": "JWT-based authentication with login/logout functionality and protected routes",
        "files": [
          "server/src/routes/auth.routes.ts",
          "server/src/controllers/auth.controller.ts",
          "server/src/plugins/auth.plugin.ts",
          "web/src/contexts/AuthContext.tsx",
          "web/src/pages/Login.tsx"
        ]
      },
      {
        "name": "Tenant Management",
        "description": "CRUD operations for tenant information including personal data, contact info, and rental history",
        "files": [
          "server/src/routes/tenant.routes.ts",
          "server/src/controllers/tenant.controller.ts",
          "server/src/entities/Tenant.entity.ts",
          "server/src/interfaces/repositories/ITenantRepository.ts",
          "server/src/interfaces/services/ITenantService.ts",
          "server/src/implementations/repositories/TenantRepository.ts",
          "server/src/implementations/services/TenantService.ts",
          "web/src/pages/Tenants.tsx",
          "web/src/components/TenantForm.tsx",
          "web/src/components/TenantDeletionModal.tsx"
        ]
      },
      {
        "name": "Property Management",
        "description": "Property catalog with detailed information, contracts, and availability status",
        "files": [
          "server/src/routes/property.routes.ts",
          "server/src/controllers/property.controller.ts",
          "server/src/entities/Property.entity.ts",
          "server/src/interfaces/repositories/IPropertyRepository.ts",
          "server/src/interfaces/services/IPropertyService.ts",
          "server/src/implementations/repositories/PropertyRepository.ts",
          "server/src/implementations/services/PropertyService.ts",
          "web/src/pages/Properties.tsx",
          "web/src/components/PropertyDetailsModal.tsx",
          "web/src/components/PropertyForm.tsx"
        ]
      },
      {
        "name": "Payment System",
        "description": "Payment tracking, debt management, receipt generation, and due date alerts",
        "files": [
          "server/src/routes/payment.routes.ts",
          "server/src/controllers/payment.controller.ts",
          "server/src/entities/Payment.entity.ts",
          "server/src/interfaces/repositories/IPaymentRepository.ts",
          "server/src/interfaces/services/IPaymentService.ts",
          "server/src/implementations/repositories/PaymentRepository.ts",
          "server/src/implementations/services/PaymentService.ts",
          "web/src/pages/Payments.tsx",
          "web/src/components/PaymentForm.tsx"
        ]
      },
      {
        "name": "Contract Management",
        "description": "Rental contract management including draft contracts and active agreements",
        "files": [
          "server/src/routes/contract.routes.ts",
          "server/src/controllers/contract.controller.ts",
          "server/src/entities/Contract.entity.ts",
          "server/src/interfaces/repositories/IContractRepository.ts",
          "server/src/interfaces/services/IContractService.ts",
          "server/src/implementations/repositories/ContractRepository.ts",
          "server/src/implementations/services/ContractService.ts",
          "web/src/pages/Contracts.tsx"
        ]
      },
      {
        "name": "Dashboard",
        "description": "Administrative dashboard with business overview, income reports, and user management",
        "files": [
          "web/src/pages/Dashboard.tsx",
          "web/src/components/DashboardStats.tsx",
          "web/src/components/RecentActivity.tsx"
        ]
      },
      {
        "name": "User Interface Components",
        "description": "Reusable UI components built with Material UI for consistent design",
        "files": [
          "web/src/components/Layout.tsx",
          "web/src/components/Navigation.tsx",
          "web/src/components/DataTable.tsx",
          "web/src/components/FormDialog.tsx",
          "web/src/components/ConfirmDialog.tsx"
        ]
      },
      {
        "name": "API Integration",
        "description": "Type-safe API communication using Eden Treaty for end-to-end type safety",
        "files": [
          "web/src/contexts/ApiContext.tsx",
          "web/src/services/api.ts",
          "shared/types/api.types.ts"
        ]
      },
      {
        "name": "Database Layer",
        "description": "Prisma ORM integration with PostgreSQL for data persistence and migrations",
        "files": [
          "server/src/lib/prisma.ts",
          "server/prisma/schema.prisma",
          "server/prisma/seed.ts"
        ]
      },
      {
        "name": "Error Handling",
        "description": "Centralized error handling and logging system",
        "files": [
          "server/src/plugins/error.plugin.ts",
          "server/src/exceptions/*.ts",
          "server/src/utils/logger.ts"
        ]
      }
    ]
  }
}
